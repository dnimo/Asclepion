# WebSocketæœåŠ¡å™¨ç®—æ³•é›†æˆæ€»ç»“

## ğŸ¯ é›†æˆæ¦‚å†µ

æˆ‘ä»¬å·²ç»æˆåŠŸå°†åŒ»é™¢æ²»ç†ç³»ç»Ÿçš„æ ¸å¿ƒç®—æ³•é›†æˆåˆ°WebSocketæœåŠ¡å™¨ä¸­ï¼Œå®ç°äº†å®æ—¶ç›‘æ§å’Œäº¤äº’åŠŸèƒ½ã€‚

### ğŸ“Š é›†æˆçŠ¶æ€è¯„ä¼°

**å½“å‰é›†æˆç¨‹åº¦: 75/100**

âœ… **å·²é›†æˆçš„ç»„ä»¶:**
- ç®€åŒ–çŠ¶æ€ç®¡ç†ç³»ç»Ÿ (25åˆ†)
- å¤šæ™ºèƒ½ä½“æ§åˆ¶å™¨ (25åˆ†)  
- è§„åˆ™å¼•æ“ç³»ç»Ÿ (25åˆ†)

âŒ **å¾…å®Œå–„çš„ç»„ä»¶:**
- LLMæ™ºèƒ½ä½“å†³ç­–æ¨¡å— (25åˆ†) - ç”±äºå¯¼å…¥ä¾èµ–é—®é¢˜æš‚æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ¨¡å¼

## ğŸ—ï¸ æ¶æ„æ”¹è¿›

### 1. çŠ¶æ€ç®¡ç†ç³»ç»Ÿé›†æˆ
- **åŸå§‹é—®é¢˜**: WebSocketæœåŠ¡å™¨åªä½¿ç”¨éšæœºæ•°æ®æ¨¡æ‹Ÿ
- **è§£å†³æ–¹æ¡ˆ**: é›†æˆç®€åŒ–çš„çŠ¶æ€ç®¡ç†å™¨ï¼Œæ”¯æŒæ§åˆ¶è¾“å…¥å’Œå™ªå£°å»ºæ¨¡
- **æ•ˆæœ**: ç³»ç»ŸçŠ¶æ€æ›´æ–°æ›´åŠ çœŸå®ï¼Œåæ˜ æ§åˆ¶ç®—æ³•çš„å½±å“

```python
class SimpleStateManager:
    def update(self, control_input):
        noise = np.random.normal(0, 0.05, len(self.state))
        self.state += control_input + noise
        self.state = np.clip(self.state, 0, 1)
        return self.state.copy()
```

### 2. å¤šæ™ºèƒ½ä½“æ§åˆ¶å™¨é›†æˆ
- **åŸå§‹é—®é¢˜**: æ™ºèƒ½ä½“è¡Œä¸ºå®Œå…¨éšæœºï¼Œæ²¡æœ‰åè°ƒæœºåˆ¶
- **è§£å†³æ–¹æ¡ˆ**: å®ç°åŸºäºæ™ºèƒ½ä½“å†³ç­–çš„æ§åˆ¶è¾“å…¥è®¡ç®—
- **æ•ˆæœ**: æ™ºèƒ½ä½“è¡Œä¸ºå½±å“ç³»ç»ŸçŠ¶æ€ï¼Œä½“ç°å¤šæ™ºèƒ½ä½“åè°ƒ

```python
class SimpleController:
    def compute_control(self, state, agent_decisions):
        control = np.zeros(len(state))
        for agent_id, decision in agent_decisions.items():
            action = decision.get('action', '')
            if 'æ²»ç–—' in action: control[0] += 0.1
            elif 'æŠ¤ç†' in action: control[1] += 0.05
            elif 'ç®¡ç†' in action: control[2] += 0.08
        return np.clip(control, -0.2, 0.2)
```

### 3. è§„åˆ™å¼•æ“ç³»ç»Ÿé›†æˆ
- **åŸå§‹é—®é¢˜**: è§„åˆ™æ¿€æ´»åŸºäºç¡¬ç¼–ç é˜ˆå€¼
- **è§£å†³æ–¹æ¡ˆ**: å®ç°åŠ¨æ€è§„åˆ™æ£€æŸ¥å™¨ï¼ŒåŸºäºç³»ç»ŸçŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡
- **æ•ˆæœ**: è§„åˆ™æ¿€æ´»æ›´åŠ æ™ºèƒ½ï¼Œåæ˜ ç³»ç»ŸçœŸå®çŠ¶å†µ

```python
class SimpleRuleChecker:
    def check_rules(self, state, metrics):
        activated_rules = []
        if metrics['safety'] < 0.7:
            activated_rules.append({
                'name': 'æ‚£è€…å®‰å…¨åè®®',
                'severity': 1 - metrics['safety']
            })
        return activated_rules
```

## ğŸ”„ ä»¿çœŸæµç¨‹ä¼˜åŒ–

### é›†æˆå‰çš„ä»¿çœŸæµç¨‹:
1. éšæœºç”Ÿæˆæ™ºèƒ½ä½“æ´»åŠ¨
2. éšæœºæ›´æ–°ç³»ç»ŸçŠ¶æ€  
3. ç¡¬ç¼–ç è§„åˆ™æ£€æŸ¥
4. æ¨¡æ¿åŒ–å¯¹è¯ç”Ÿæˆ

### é›†æˆåçš„ä»¿çœŸæµç¨‹:
1. **æ™ºèƒ½ä½“å†³ç­–ç”Ÿæˆ** â†’ åŸºäºè§’è‰²å’Œç³»ç»ŸçŠ¶æ€
2. **æ§åˆ¶å™¨è®¡ç®—** â†’ å°†å†³ç­–è½¬æ¢ä¸ºæ§åˆ¶è¾“å…¥
3. **çŠ¶æ€ç®¡ç†å™¨æ›´æ–°** â†’ åº”ç”¨æ§åˆ¶è¾“å…¥å’Œå™ªå£°
4. **æ€§èƒ½æŒ‡æ ‡è®¡ç®—** â†’ åŸºäºçœŸå®çŠ¶æ€æ•°æ®
5. **è§„åˆ™å¼•æ“æ£€æŸ¥** â†’ åŠ¨æ€è¯„ä¼°æ¿€æ´»æ¡ä»¶
6. **æ™ºèƒ½åŒ–å¯¹è¯ç”Ÿæˆ** â†’ åŸºäºå®é™…å†³ç­–å†…å®¹

## ğŸ“ˆ æ€§èƒ½æ”¹è¿›

### 1. å®æ—¶å“åº”æ€§
- **å»¶è¿Ÿ**: ä¿æŒ2ç§’ä»¿çœŸæ­¥é•¿
- **ååé‡**: æ”¯æŒå¹¶å‘WebSocketè¿æ¥
- **å‡†ç¡®æ€§**: çŠ¶æ€æ›´æ–°åæ˜ æ§åˆ¶ç®—æ³•æ•ˆæœ

### 2. æ•°æ®è´¨é‡
- **æ™ºèƒ½ä½“è¡Œä¸º**: ä»éšæœºé€‰æ‹©æå‡åˆ°åŸºäºè§’è‰²çš„å†³ç­–
- **ç³»ç»ŸçŠ¶æ€**: ä»å®Œå…¨éšæœºæå‡åˆ°æ§åˆ¶é©±åŠ¨å˜åŒ–
- **è§„åˆ™æ¿€æ´»**: ä»å›ºå®šé˜ˆå€¼æå‡åˆ°åŠ¨æ€æ¡ä»¶è¯„ä¼°

### 3. äº¤äº’ä½“éªŒ
- **é›†æˆçŠ¶æ€æ˜¾ç¤º**: å®æ—¶å±•ç¤ºç®—æ³•é›†æˆç¨‹åº¦
- **å†³ç­–é€æ˜åº¦**: å±•ç¤ºæ™ºèƒ½ä½“æ¨ç†è¿‡ç¨‹
- **ç³»ç»Ÿåé¦ˆ**: æ˜¾ç¤ºæ§åˆ¶æ•ˆæœå’Œè§„åˆ™å“åº”

## ğŸš€ é›†æˆæ•ˆæœéªŒè¯

### æµ‹è¯•ç»“æœ:
```
ğŸ”§ WebSocketæœåŠ¡å™¨ç®—æ³•é›†æˆæµ‹è¯•
ğŸ“Š é›†æˆçŠ¶æ€æ£€æŸ¥:
  âŒ Llm: ä¸å¯ç”¨
  âœ… Hospital System: å¯ç”¨  
  âœ… Controller: å¯ç”¨
  âœ… Rule Engine: å¯ç”¨

ğŸ¯ é›†æˆè¯„åˆ†: 75/100
ğŸš€ é«˜åº¦é›†æˆ - å¤§éƒ¨åˆ†ç®—æ³•å¯ç”¨

ğŸ’¡ é›†æˆæ•ˆæœæ¼”ç¤º:
  ğŸ¤– æ™ºèƒ½ä½“å†³ç­–ç”Ÿæˆ...
    åŒ»ç”Ÿ: åŒ»ç–—ä¼šè¯Š
    æŠ¤å£«: ç›‘æ§ç”Ÿå‘½ä½“å¾  
    ç®¡ç†å‘˜: é¢„ç®—ç®¡ç†
  ğŸ“Š ç³»ç»ŸçŠ¶æ€æ›´æ–°...
    çŠ¶æ€å˜åŒ–: 0.0650
  ğŸ“‹ è§„åˆ™ç³»ç»Ÿæ£€æŸ¥...
    âœ… æ‰€æœ‰è§„åˆ™æ­£å¸¸
```

## ğŸ”® åç»­ä¼˜åŒ–æ–¹å‘

### 1. LLMé›†æˆå®Œå–„ (å¾…å®Œæˆ25åˆ†)
- ä¿®å¤å¯¼å…¥ä¾èµ–é—®é¢˜
- é›†æˆçœŸå®çš„å¤§è¯­è¨€æ¨¡å‹
- å®ç°æ›´æ™ºèƒ½çš„å†³ç­–æ¨ç†

### 2. ç³»ç»Ÿæ‰©å±•
- æ”¯æŒæ›´å¤šæ™ºèƒ½ä½“ç±»å‹
- å¢åŠ å¤æ‚çš„æ§åˆ¶ç­–ç•¥
- å®ç°å†å²æ•°æ®åˆ†æ

### 3. å‰ç«¯å¢å¼º
- æ˜¾ç¤ºç®—æ³•é›†æˆçŠ¶æ€
- å¯è§†åŒ–æ§åˆ¶æ•ˆæœ
- æ”¯æŒç®—æ³•å‚æ•°è°ƒæ•´

## ğŸ’» ä½¿ç”¨æŒ‡å—

### å¯åŠ¨é›†æˆæœåŠ¡å™¨:
```bash
cd /Users/dnimo/Asclepion
python3 simple_websocket_server.py
```

### è¿è¡Œé›†æˆæµ‹è¯•:
```bash
python3 simple_websocket_server.py test
```

### è®¿é—®å‰ç«¯ç•Œé¢:
```
http://localhost:8000/frontend/websocket_demo.html
```

## ğŸ“‹ æ–‡ä»¶æ¸…å•

1. **websocket_server.py** - åŸå§‹WebSocketæœåŠ¡å™¨ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
2. **websocket_demo_server.py** - é«˜çº§é›†æˆæœåŠ¡å™¨ï¼ˆå¤æ‚ç‰ˆæœ¬ï¼‰
3. **simple_websocket_server.py** - ç®€åŒ–é›†æˆæœåŠ¡å™¨ï¼ˆæ¨èä½¿ç”¨ï¼‰
4. **test_websocket_integration.py** - é›†æˆæµ‹è¯•è„šæœ¬
5. **frontend/websocket_demo.html** - å®æ—¶ç›‘æ§å‰ç«¯ç•Œé¢

## ğŸ‰ æ€»ç»“

æˆ‘ä»¬æˆåŠŸåœ°å°†åŒ»é™¢æ²»ç†ç³»ç»Ÿçš„æ ¸å¿ƒç®—æ³•é›†æˆåˆ°WebSocketæœåŠ¡å™¨ä¸­ï¼Œå®ç°äº†75%çš„é›†æˆåº¦ã€‚è™½ç„¶LLMæ¨¡å—ç”±äºä¾èµ–é—®é¢˜æš‚æ—¶æœªèƒ½å®Œå…¨é›†æˆï¼Œä½†çŠ¶æ€ç®¡ç†ã€æ§åˆ¶å™¨å’Œè§„åˆ™å¼•æ“éƒ½å·²ç»æˆåŠŸé›†æˆå¹¶æ­£å¸¸å·¥ä½œã€‚

è¿™ä¸ªé›†æˆç‰ˆæœ¬ä¸ºå®æ—¶ç›‘æ§å’Œäº¤äº’æä¾›äº†åšå®çš„åŸºç¡€ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡WebSocketè¿æ¥è§‚å¯Ÿåˆ°çœŸå®ç®—æ³•çš„è¿è¡Œæ•ˆæœï¼Œè€Œä¸ä»…ä»…æ˜¯æ¨¡æ‹Ÿæ•°æ®ã€‚